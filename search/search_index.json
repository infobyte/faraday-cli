{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Faraday Cli","text":"<p>Use Faraday directly from your favorite terminal. faraday-cli is the official client that make automating your security workflows, easier.</p>"},{"location":"#examples","title":"Examples","text":"<p>Here you have some snippets of different workflows you can generate using faraday-cli</p>"},{"location":"#one-line-continuous-scan","title":"One-line Continuous Scan","text":"<p>Scan assets from workspace.</p> <pre><code>$ faraday-cli host list -ip -w other_ws | nmap -iL - -oX /tmp/nmap.xml &amp;&amp; faraday-cli tool report -w other_ws /tmp/nmap.xml\n</code></pre>"},{"location":"#one-line-to-nmap-to-all-the-host-in-the-workspace-and-import-the-results-back-to-faraday","title":"One-Line to nmap to all the host in the workspace and import the results back to Faraday","text":"<p>To scan all the host list inside a workspace with <code>nmap</code> and import the results back to faraday.</p> <pre><code>for ip in $(faraday-cli host list -ip); faraday-cli tool run \\\"nmap -Pn -p443,80 -sV --script=+http-enum -vvv $ip\\\"\n</code></pre> <p>!!! info In this case it should have a workspace named \"other_ws\" with  hostnames in it</p>"},{"location":"#scan-your-subdomains","title":"Scan your subdomains","text":"<p>Use a tool like <code>assetfinder</code> to do a domains lookup, scan them with nmap and send the results to faraday</p> <p><pre><code>$ assetfinder -subs-only example.com| sort | uniq |awk 'BEGIN { ORS = \"\"; print \" {\\\"target\\\":\\\"\"}\n{ printf \"%s%s\", separator, $1, $2\nseparator = \",\"}END { print \"\\\"}\" }' | faraday-cli agent run -a 1 -e nmap --stdin\n</code></pre> !!! info For this purpouse, an agent is created and already connected to run the nmap executor</p>"},{"location":"#send-faraday-executive-reports-by-mail","title":"Send Faraday Executive Reports by mail","text":"<p>Run a daily scan and send your report</p> <pre><code>$ faraday-cli executive_report create -t \\'\"generic_default.docx (generic) (Word)\"\\' --confirmed -d /tmp/report.docx &amp;&amp; echo \"Faraday Daily Report\" | mail -s \"Daily Report\" user@example.com -A /tmp/report.docx\n</code></pre>"},{"location":"#load-your-assets-from-your-cloud-provider","title":"Load your assets from your cloud provider","text":"<p>Here you can list your assets using a cli from your provider (in this example Digital Ocean), then generate a json with that information and use faraday-cli to send it to faraday.</p> <pre><code>$ doctl compute droplet list --format PublicIPv4,Name --no-header | awk 'BEGIN { ORS = \"\"; print \" [\"}\n{ printf \"%s{\\\"ip\\\": \\\"%s\\\", \\\"description\\\": \\\"%s\\\"}\", separator, $1, $2\nseparator = \", \"}END { print \"] \" }' | faraday-cli host create --stdin\n</code></pre> <p>Too many secrets?</p> <pre><code>QW55IGZhbnMgb2YgVGhlIFNuZWFrZXJzPz8gVHJ5IHJ1bm5pbmcgZmFyYWRheS1jbGkgYWZ0ZXIgc2V0dGluZyB0aGlzICJleHBvcnQgS0FLRVJfTU9ERT0xIg\n</code></pre>"},{"location":"commands/","title":"Commands","text":"<p>All the commands can be run in <code>Shell Mode</code> or <code>Command Mode</code></p>"},{"location":"commands/#authentication","title":"Authentication","text":""},{"location":"commands/#auth","title":"auth","text":"<p>Authenticate with your faraday server.</p> <p><pre><code>$ faraday-cli auth\nFaraday url [http://localhost:5985]: http://localhost:5985\nUser: faraday\nPassword:\nSaving config\n\u2714 Authenticated with faraday: http://localhost:5985\n</code></pre> Optional arguments:</p> Syntax Description <code>-f/--faraday-url FARADAY_URL</code> url of your faraday server <code>-i/--ignore-ssl</code> Ignore SSL certificate validation <code>-i/--ignore-ssl</code> Ignore SSL certificate validation <code>-u/--user USER</code> Faraday user <code>-p/--password PASSWORD</code> Faraday password <p>Faraday token expiration</p> <p>You may want to change the faraday token expiration time, so you don't have to authenticate so often.</p> <p>The default is 12 hours.</p> <p>To do it change de value of <code>api_token_expiration</code>(expressed in seconds) in your faraday <code>server.ini</code></p>"},{"location":"commands/#status","title":"status","text":"<p>Show the status of your current authentication.</p> <p><pre><code>$ faraday-cli status\nFARADAY SERVER         IGNORE SSL    VERSION    USER     VALID TOKEN    WORKSPACE\n---------------------  ------------  ---------  -------  -------------  -----------\nhttp://localhost:5985  False         corp-3.14  faraday  \u2714              test\n</code></pre> Optional Arguments:</p> Syntax Description <code>-p/--pretty</code> Show table in a pretty format"},{"location":"commands/#workspaces","title":"Workspaces","text":""},{"location":"commands/#workspace-list","title":"workspace list","text":"<p>List workspaces created in faraday.</p> <pre><code>$ faraday-cli workspace list -p\n+--------+---------+------------+---------+----------+----------+------------+\n| NAME   |   HOSTS |   SERVICES | VULNS   | ACTIVE   | PUBLIC   | READONLY   |\n|--------+---------+------------+---------+----------+----------+------------|\n| test   |      13 |         13 | 39      | True     | False    | False      |\n+--------+---------+------------+---------+----------+----------+------------+\n</code></pre> <p>Optional Arguments:</p> Syntax Description <code>-j/--json-output</code> Show output in json <code>-p/--pretty</code> Show table in a pretty format <code>--show-inactive</code> Include inactive workspaces"},{"location":"commands/#workspace-delete","title":"workspace delete","text":"<p>Delete workspace from faraday.</p> <pre><code>$ faraday-cli workspace delete test\nDeleting workspace: test\nDeleted workspace: test\n</code></pre> <p>Required Arguments:</p> Syntax Description <code>WORKSPACE_NAME</code> Workspace name"},{"location":"commands/#workspace-get","title":"workspace get","text":"<p>Get details of a workspace.</p> <pre><code>$ faraday-cli workspace get -p test\n+--------+----------+----------+------------+---------+------------+---------+\n| NAME   | ACTIVE   | PUBLIC   | READONLY   |   HOSTS |   SERVICES |   VULNS |\n|--------+----------+----------+------------+---------+------------+---------|\n| test   | True     | False    | False      |      13 |         13 |      39 |\n+--------+----------+----------+------------+---------+------------+---------+\n</code></pre> <p>Required Arguments:</p> Syntax Description <code>WORKSPACE_NAME</code> Workspace name <p>Optional Arguments:</p> Syntax Description <code>-j/--json-output</code> Show output in json <code>-p/--pretty</code> Show table in a pretty format"},{"location":"commands/#workspace-select","title":"workspace select","text":"<p>Select your active workspace, unless you use the <code>-w</code> argument all the commands will use this workspace.</p> <pre><code>$ faraday-cli workspace select test\n\u2714 Selected workspace: test\n</code></pre> <p>Required Arguments:</p> Syntax Description <code>WORKSPACE_NAME</code> Workspace name"},{"location":"commands/#workspace-create","title":"workspace create","text":"<p>Create a new workspace in faraday.</p> <pre><code>$ faraday-cli workspace create test_workspace\n\u2714 Created workspace: test_workspace\n</code></pre> <p>Required Arguments:</p> Syntax Description <code>WORKSPACE_NAME</code> Workspace name <p>Optional Arguments:</p> Syntax Description <code>-d/--dont-select</code> Dont select after create"},{"location":"commands/#workspace-dashboard","title":"workspace dashboard","text":"<p>Show a dashboard with different information about the workspaces.</p> <pre><code>$ faraday-cli workspace dashboard\n+--------------+----------------------------+---------------+--------------+------------------------------------------------------------------------------------------------+\n| WORKSPACE    | INFO                       | SUMMARY       | SEVERITIES   | ACTIVITY                                                                                       |\n+==============+============================+===============+==============+================================================================================================+\n| faraday_test | users: -                   | hosts: 56     | critical: 0  | Nmap (shell) found 1 hosts, 7 services and 0 vulns (0/0/0/0/0) 2 hours ago by faraday          |\n|              | readonly: False            | services: 221 | high: 0      | Openvas (report) found 13 hosts, 13 services and 39 vulns (0/0/13/26/0) 2 hours ago by faraday |\n|              | public: False              | vulns: 52     | med: 13      | agent_firstcan (agent) found 42 hosts, 201 services and 13 vulns (0/0/0/2/11) 3 days ago       |\n|              | updated: 06/17/21 15:45:55 |               | low: 28      |                                                                                                |\n|              |                            |               | info: 11     |                                                                                                |\n+--------------+----------------------------+---------------+--------------+------------------------------------------------------------------------------------------------+\n</code></pre>"},{"location":"commands/#hosts","title":"Hosts","text":""},{"location":"commands/#host-list","title":"host list","text":"<p>List hosts in a workspace.</p> <pre><code>$ faraday-cli host list -p\n+------+------------+---------+-------------+------------+---------+\n|   ID | IP         | OS      | HOSTNAMES   |   SERVICES |   VULNS |\n|------+------------+---------+-------------+------------+---------|\n|   11 | 127.0.0.1  | unknown |             |          1 |       3 |\n|    3 | 127.0.0.10 | unknown |             |          1 |       3 |\n|    6 | 127.0.0.11 | unknown |             |          1 |       3 |\n|    5 | 127.0.0.12 | unknown |             |          1 |       3 |\n|    7 | 127.0.0.13 | unknown |             |          1 |       3 |\n|   13 | 127.0.0.2  | unknown |             |          1 |       3 |\n|    2 | 127.0.0.3  | unknown |             |          1 |       3 |\n|    9 | 127.0.0.4  | unknown |             |          1 |       3 |\n|   10 | 127.0.0.5  | unknown |             |          1 |       3 |\n|    4 | 127.0.0.6  | unknown |             |          1 |       3 |\n|    8 | 127.0.0.7  | unknown |             |          1 |       3 |\n|    1 | 127.0.0.8  | unknown |             |          1 |       3 |\n|   12 | 127.0.0.9  | unknown |             |          1 |       3 |\n+------+------------+---------+-------------+------------+---------+\n</code></pre> <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>-p/--pretty</code> Show table in a pretty format <code>-j/--json-output</code> Show output in json <code>-ip/--list-ip</code> Show ip only <code>--port PORT</code> Listen in port"},{"location":"commands/#host-get","title":"host get","text":"<p>Get host information.</p> <pre><code>$ faraday-cli host get 13 -p\nHost:\n+------+-----------+---------+-------------+---------+---------+---------+\n|   ID | IP        | OS      | HOSTNAMES   | OWNER   | OWNED   |   VULNS |\n|------+-----------+---------+-------------+---------+---------+---------|\n|   13 | 127.0.0.2 | unknown |             | faraday | False   |       3 |\n+------+-----------+---------+-------------+---------+---------+---------+\n\nServices:\n+------+--------+---------------+------------+--------+-----------+----------+---------+\n|   ID | NAME   | DESCRIPTION   | PROTOCOL   |   PORT | VERSION   | STATUS   |   VULNS |\n|------+--------+---------------+------------+--------+-----------+----------+---------|\n|   13 | ssh    |               | tcp        |     22 | unknown   | open     |       2 |\n+------+--------+---------------+------------+--------+-----------+----------+---------+\n\nVulnerabilities:\n+------+------------------------------------------+------------+----------+-------------+---------+\n|   ID | NAME                                     | SEVERITY   | STATUS   | CONFIRMED   | TOOL    |\n|------+------------------------------------------+------------+----------+-------------+---------|\n|   37 | SSH Weak Encryption Algorithms Supported | MED        | opened   | False       | Openvas |\n|   38 | SSH Weak MAC Algorithms Supported        | LOW        | opened   | False       | Openvas |\n|   39 | TCP timestamps                           | LOW        | opened   | False       | Openvas |\n+------+------------------------------------------+------------+----------+-------------+---------+\n</code></pre> <p>Requirement Arguments:</p> Syntax Description <code>host_id</code> ID of the host <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>-p/--pretty</code> Show table in a pretty format <code>-j/--json-output</code> Show output in json"},{"location":"commands/#host-delete","title":"host delete","text":"<p>Delete host.</p> <pre><code>$ faraday-cli host delete 13\nHost deleted\n</code></pre> <p>Requirement Arguments:</p> Syntax Description <code>host_id</code> ID of the host <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name"},{"location":"commands/#host-create","title":"host create","text":"<p>Create hosts.</p> <p>Info</p> <p>You can pass the host data via stdin. <pre><code>$ echo '[{\"ip\": \"1.1.1.5\", \"description\": \"some text\"}]' | faraday-cli host create --stdin\n</code></pre></p> <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>-d/--host-data HOST_DATA</code> Host data in json format <code>--stdin</code> Read host-data from stdin <p>host data schema: <pre><code>{'type': 'array', 'items': {'type': 'object', 'properties':\n    {'ip': {'type': 'string'}, 'description': {'type': 'string'},\n    'hostnames': {'type': 'array'}}, 'required': ['ip', 'description']}}\n</code></pre></p> <p>Warning</p> <p>If you pass the host data as an argument it needs to be escaped like this (only in command mode, not in shell mode). <pre><code>$ faraday-cli create hosts -d \\''[{\"ip\": \"stan.local\", \"description\": \"some server\"}]'\\'\n</code></pre></p>"},{"location":"commands/#services","title":"Services","text":""},{"location":"commands/#service-list","title":"service list","text":"<p>List services in a workspace.</p> <pre><code>$ faraday-cli service list -p\n+------+--------+--------------+------------+--------+------------+--------+---------+\n|   ID | NAME   | SUMMARY      | IP         |   PORT | PROTOCOL   |   HOST |   VULNS |\n|------+--------+--------------+------------+--------+------------+--------+---------|\n|    1 | ssh    | (22/tcp) ssh | 127.0.0.8  |     22 | tcp        |      1 |       2 |\n|    2 | ssh    | (22/tcp) ssh | 127.0.0.3  |     22 | tcp        |      2 |       2 |\n|    3 | ssh    | (22/tcp) ssh | 127.0.0.10 |     22 | tcp        |      3 |       2 |\n|    4 | ssh    | (22/tcp) ssh | 127.0.0.6  |     22 | tcp        |      4 |       2 |\n|    5 | ssh    | (22/tcp) ssh | 127.0.0.12 |     22 | tcp        |      5 |       2 |\n|    6 | ssh    | (22/tcp) ssh | 127.0.0.11 |     22 | tcp        |      6 |       2 |\n|    7 | ssh    | (22/tcp) ssh | 127.0.0.13 |     22 | tcp        |      7 |       2 |\n|    8 | ssh    | (22/tcp) ssh | 127.0.0.7  |     22 | tcp        |      8 |       2 |\n|    9 | ssh    | (22/tcp) ssh | 127.0.0.4  |     22 | tcp        |      9 |       2 |\n|   10 | ssh    | (22/tcp) ssh | 127.0.0.5  |     22 | tcp        |     10 |       2 |\n|   11 | ssh    | (22/tcp) ssh | 127.0.0.1  |     22 | tcp        |     11 |       2 |\n|   12 | ssh    | (22/tcp) ssh | 127.0.0.9  |     22 | tcp        |     12 |       2 |\n+------+--------+--------------+------------+--------+------------+--------+---------+\n</code></pre> <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>-p/--pretty</code> Show table in a pretty format <code>-j/--json-output</code> Show output in json"},{"location":"commands/#vulnerabilities","title":"Vulnerabilities","text":""},{"location":"commands/#vuln-list","title":"vuln list","text":"<p>List 50 vulnerabilities by default from a workspace. Use + for next page, - for previous.</p> <pre><code>$ faraday-cli vuln list -p\n+------+-----------------------------------------------------------------------------+------------+----------+-------------+--------------------------------------------------+-------------+\n|   ID | NAME                                                                        | SEVERITY   | STATUS   | CONFIRMED   | ASSET                                            | HOSTNAMES   |\n|------+-----------------------------------------------------------------------------+------------+----------+-------------+--------------------------------------------------+-------------|\n| 5200 | Terminal Services Encryption Level is Medium or Low                         | med        | opened   | False       | 10.33.112.22 [Service - (3389/tcp) msrdp]        | qa3app02    |\n| 5198 | Microsoft Windows Remote Desktop Protocol Server Man-in-the-Middle Weakness | med        | opened   | False       | 10.33.112.22 [Service - (3389/tcp) msrdp]        | qa3app02    |\n| 5120 | SMB Signing Disabled                                                        | med        | opened   | False       | 10.33.112.24 [Service - (445/tcp) cifs]          | qa3app04    |\n| 5069 | Terminal Services Encryption Level is Medium or Low                         | med        | opened   | False       | 10.33.112.25 [Service - (3389/tcp) msrdp]        | qa3app05    |\n| 5034 | Terminal Services Encryption Level is Medium or Low                         | med        | opened   | False       | 10.33.112.26 [Service - (3389/tcp) msrdp]        | qa3app06    |\n| 5116 | Terminal Services Encryption Level is Medium or Low                         | med        | opened   | False       | 10.33.112.24 [Service - (3389/tcp) msrdp]        | qa3app04    |\n| 5237 | Microsoft Windows Remote Desktop Protocol Server Man-in-the-Middle Weakness | med        | opened   | False       | 10.33.112.21 [Service - (3389/tcp) msrdp]        | qa3app01    |\n| 5079 | SMB Signing Disabled                                                        | med        | opened   | False       | 10.33.112.25 [Service - (445/tcp) cifs]          | qa3app05    |\n| 4997 | SMB Signing Disabled                                                        | med        | opened   | False       | 10.33.112.29 [Service - (445/tcp) cifs]          | qa3app09    |\n| 5151 | Terminal Services Encryption Level is Medium or Low                         | med        | opened   | False       | 10.33.112.23 [Service - (3389/tcp) msrdp]        | qa3app03    |\n| 5239 | Terminal Services Encryption Level is Medium or Low                         | med        | opened   | False       | 10.33.112.21 [Service - (3389/tcp) msrdp]        | qa3app01    |\n| 5161 | SMB Signing Disabled                                                        | med        | opened   | False       | 10.33.112.23 [Service - (445/tcp) cifs]          | qa3app03    |\n| 5235 | Terminal Services Doesn't Use Network Level Authentication (NLA)            | med        | opened   | False       | 10.33.112.21 [Service - (3389/tcp) msrdp]        | qa3app01    |\n| 5249 | SMB Signing Disabled                                                        | med        | opened   | False       | 10.33.112.21 [Service - (445/tcp) cifs]          | qa3app01    |\n| 4983 | Terminal Services Doesn't Use Network Level Authentication (NLA)            | med        | opened   | False       | 10.33.112.29 [Service - (3389/tcp) msrdp]        | qa3app09    |\n| 5067 | Microsoft Windows Remote Desktop Protocol Server Man-in-the-Middle Weakness | med        | opened   | False       | 10.33.112.25 [Service - (3389/tcp) msrdp]        | qa3app05    |\n| 5038 | SMB Signing Disabled                                                        | med        | opened   | False       | 10.33.112.26 [Service - (445/tcp) cifs]          | qa3app06    |\n| 4987 | Terminal Services Encryption Level is Medium or Low                         | med        | opened   | False       | 10.33.112.29 [Service - (3389/tcp) msrdp]        | qa3app09    |\n| 5272 | Ethernet Card Manufacturer Detection                                        | info       | opened   | False       | 10.33.112.21 [Host - ID:72]                      | qa3app01    |\n| 5142 | OS Identification                                                           | info       | opened   | False       | 10.33.112.24 [Host - ID:69]                      | qa3app04    |\n| 5228 | OS Identification                                                           | info       | opened   | False       | 10.33.112.22 [Host - ID:71]                      | qa3app02    |\n+------+-----------------------------------------------------------------------------+------------+----------+-------------+--------------------------------------------------+-------------+\n</code></pre> <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>-p/--pretty</code> Show table in a pretty format <code>-j/--json-output</code> Show output in json <code>--severity [SEVERITY [SEVERITY ...]]</code> Filter by severity informational/critical/high/medium/low/unclassified <code>--confirmed</code> Confirmed vulnerabilities <code>--page</code> Specify the page number to display, starting from 0 <code>--limit</code> Set the number of vulnerabilities per page (max 4000). <code>--no-interaction</code> Disable interactive mode for page navigation <code>--advanced-filters</code> Apply complex filters using a JSON structure. For example: <code>--advanced-filters '{\"filters\":[{\"name\":\"description\",\"op\":\"like\",\"val\":\"%sql injection%\"}]}'</code>"},{"location":"commands/#vuln-add-evidence","title":"vuln add-evidence","text":"<p>Add an image evidence to a vulnerability</p> <pre><code>$ faraday-cli vuln add-evidence -id 46 -w test ~/evidence.png\nEvidence upload was successful\n</code></pre> <p>Required Arguments:</p> Syntax Description <code>-id/--vulnerability-id</code> Vulnerability ID <code>image</code> Image path <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name"},{"location":"commands/#vuln-update","title":"vuln update","text":"<p>Update one or more fields of a vulnerability</p> <pre><code>$ faraday-cli vuln update 46 -w test --status closed\nVulnerability updated\n</code></pre> <p>Required Arguments:</p> Syntax Description <code>-id/--vulnerability-id</code> Vulnerability ID <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>--status STATUS</code> Status of the Vulnerability: open, closed, re-opened, risk-accepted <code>--severity SEVERITY</code> Severity of the Vulnerability: unclassified, info, low, med, high, critical <code>--desc DESCRIPTION</code> Description <code>--name NAME</code> Vulnerability Name <code>--tag TAG</code> Tag to add to the vuln. In case that you want add more than one vuln you can repeat this argument <code>--confirmed CONFIRMED</code> Indicates if the Vulnerability is confirmed: True, False"},{"location":"commands/#vuln-delete","title":"vuln delete","text":"<p>Delete a vulnerability</p> <pre><code>$ faraday-cli vuln delete 46 -w test\nVulnerability deleted\n</code></pre> <p>Required Arguments:</p> Syntax Description <code>-id/--vulnerability-id</code> Vulnerability ID <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name"},{"location":"commands/#tools-and-reports","title":"Tools and Reports","text":""},{"location":"commands/#tool-report","title":"tool report","text":"<p>Process different tools reports and upload the information into faraday.</p> <p>Info</p> <p>Check our Faraday Plugins repo for information about compatible tools.</p> <pre><code>$ faraday-cli tool report $HOME/Downloads/openvas-report.xml\n\ud83d\udcc4 Processing Openvas report\n\u2b06 Sending data to workspace: test\n\u2714 Done\n</code></pre> <p>Required Arguments:</p> Syntax Description <code>report_path</code> Path of the report file <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>--create-workspace</code> if -w is used and the workspace dont exists, it will create it <code>--plugin-id PLUGIN_ID</code> Plugin ID (force detection) <code>-j/--json-output</code> Show output in json (dont send it to faraday) <code>--vuln-tag VULN_TAG</code> Tag to add to vulnerabilities <code>--host-tag HOST_TAG</code> Tag to add to hosts <code>--service-tag SERVICE_TAG</code> Tag to add to services <code>--min-severity SEVERITY</code> Minimum severity of vulnerabilities to import (unclassified/info/low/med/high/critical) <code>--max-severity SEVERITY</code> Maximum severity of vulnerabilities to import (unclassified/info/low/med/high/critical)"},{"location":"commands/#tool-run","title":"tool run","text":"<p>Execute a tool and upload the information into faraday.</p> <p>Info</p> <p>Check our Faraday Plugins repo for information about compatible tools.</p> <pre><code>$ faraday-cli tool run \\\"nmap www.exampledomain.com\\\"\n\ud83d\udcbb Processing Nmap command\nStarting Nmap 7.80 ( https://nmap.org ) at 2021-02-22 14:13 -03\nNmap scan report for www.exampledomain.com (10.196.205.130)\nHost is up (0.17s latency).\nrDNS record for 10.196.205.130: 10.196.205.130.bc.googleusercontent.com\nNot shown: 996 filtered ports\nPORT     STATE  SERVICE\n80/tcp   open   http\n443/tcp  open   https\n2222/tcp open   EtherNetIP-1\n3306/tcp closed mysql\n\nNmap done: 1 IP address (1 host up) scanned in 11.12 seconds\n\u2b06 Sending data to workspace: test\n\u2714 Done\n</code></pre> <p>Required Arguments:</p> Syntax Description <code>command</code> Command of the tool to process <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>--plugin-id PLUGIN_ID</code> Plugin ID (force detection) <code>-j/--json-output</code> Show output in json (dont send it to faraday) <code>--vuln-tag VULN_TAG</code> Tag to add to vulnerabilities <code>--host-tag HOST_TAG</code> Tag to add to hosts <code>--service-tag SERVICE_TAG</code> Tag to add to services <code>--min-severity SEVERITY</code> Minimum severity of vulnerabilities to import (unclassified/info/low/med/high/critical) <code>--max-severity SEVERITY</code> Maximum severity of vulnerabilities to import (unclassified/info/low/med/high/critical)"},{"location":"commands/#vulnerabilities-stats","title":"Vulnerabilities Stats","text":""},{"location":"commands/#stats","title":"stats","text":"<p>Different stats about the vulnerabilities in Faraday.</p> <p></p> <p>Required Arguments:</p> Syntax Description <code>--type {severity,vulns,date}</code> Type of stat <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>--create-workspace</code> if -w is used and the workspace dont exists, it will create it <code>--ignore-info</code> Ignore informational/unclassified vulnerabilities <code>--severity [SEVERITY [SEVERITY ...]]</code> Filter by severity informational/critical/high/medium/low/unclassified <code>--confirmed</code> Confirmed vulnerabilities"},{"location":"commands/#agents","title":"Agents","text":"<p>Info</p> <p>For these commands you need to have our Faraday Agents configured.</p>"},{"location":"commands/#agent-list","title":"agent list","text":"<p>List all configured agents.</p> <pre><code>$ faraday-cli agent list\n  ID  NAME    ACTIVE    STATUS    EXECUTORS\n----  ------  --------  --------  -----------\n   2  nico    True      online    nmap\n</code></pre> <p>Optional Arguments:</p> Syntax Description <code>-p/--pretty</code> Show table in a pretty format <code>-j/--json-output</code> Show output in json"},{"location":"commands/#agent-get","title":"agent get","text":"<p>Get information of and agent and its executors.</p> <pre><code>$ faraday-cli agent get 2\n   ID  NAME    ACTIVE    STATUS\n----  ------  --------  --------\n   2  nico    True      online\n\nExecutors:\n  ID  NAME    PARAMETERS [REQUIRED]\n----  ------  -----------------------\n   2  nmap    target [True]\n              option_pn [False]\n              option_sc [False]\n              option_sv [False]\n              port_list [False]\n              top_ports [False]\n              host_timeout [False]\n              script_timeout [False]\n</code></pre> <p>Required Arguments:</p> Syntax Description <code>AGENT_ID</code> ID of the Agent <p>Optional Arguments:</p> Syntax Description <code>-p/--pretty</code> Show table in a pretty format <code>-j/--json-output</code> Show output in json"},{"location":"commands/#agent-run","title":"agent run","text":"<p>Run an executor.</p> <p>Info</p> <p>You can pass the executor parameters via stdin. <pre><code>$ echo '{\"target\": \"www.google.com\"}' | faraday-cli agent run -a 1 -e nmap --stdin --workspace-name my_workspace\n</code></pre> If no <code>-p</code> or <code>--stdin</code> argument is provided, then the executor parameters will be asked one by one.</p> <p>You can store the parameters in env variables and will be auto loaded.</p> <p>Example: <pre><code>For the TARGET parameter of the NMAP executor save the variable FARADAY_CLI_EXECUTOR_NMAP_TARGET\n</code></pre></p> <p>You can store the parameters in a file and use it as a 'profile' to repeat scans <pre><code>$ cat scan_test.com_nmap.vars\nFARADAY_CLI_EXECUTOR_NMAP_TARGET=test.com\nFARADAY_CLI_EXECUTOR_NMAP_OPTION_PN=true\nFARADAY_CLI_EXECUTOR_NMAP_OPTION_SC=false\nFARADAY_CLI_EXECUTOR_NMAP_OPTION_SV=true\nFARADAY_CLI_EXECUTOR_NMAP_PORT_LIST=\nFARADAY_CLI_EXECUTOR_NMAP_TOP_PORTS=\nFARADAY_CLI_EXECUTOR_NMAP_HOST_TIMEOUT=\nFARADAY_CLI_EXECUTOR_NMAP_SCRIPT_TIMEOUT=\n\n$ source scan_test.com_nmap.vars &amp;&amp; faraday-cli agent run -a 2 -e nmap -w test\nRunning executor: unnamed_agent/nmap\nParameters: {\"TARGET\": \"test.com\", \"OPTION_PN\": \"true\", \"OPTION_SC\": \"false\", \"OPTION_SV\": \"true\"}\nGenerated Command: 14\n</code></pre></p> <p>Warning</p> <p>If you pass the executor parameters as an argument it needs to be escaped like this (only in command mode, not in shell mode). <pre><code>$ faraday-cli  agent run -a 1 -e nmap -p \\''{\"target\": \"www.go ogle.com\"}'\\'\nRunning executor: unnamed_agent/nmap\nParameters: {\"TARGET\": \"www.google.com\"}\nGenerated Command: 13\n</code></pre></p> <p>Required Arguments:</p> Syntax Description <code>-a/--agent-id AGENT_ID</code> ID of the agent <code>-e/--executor-name EXECUTOR_NAME</code> Executor name <code>-p/--executor-params EXECUTOR_PARAMS</code> Executor Params in json <code>-w --workpsace-name</code> Workspace name <p>Optional Arguments:</p> Syntax Description <code>--stdin</code> Read executor-params from stdin"},{"location":"commands/#executive-reports","title":"Executive Reports","text":"<p>Info</p> <p>These commands only work with a commercial version of Faraday.</p>"},{"location":"commands/#executive_report-list-templates","title":"executive_report list-templates","text":"<p>List the templates available to generate Executive Reports.</p> <pre><code>$ faraday-cli executive_report list-templates -p\n+------------------------------------------------------------------+-----------+\n| NAME                                                             | GROUPED   |\n|------------------------------------------------------------------+-----------|\n| generic_default.docx (generic) (Word)                            | False     |\n| generic_default.html (generic) (PDF)                             | False     |\n| group_default.docx (grouped) (Word)                              | True      |\n| group_default.html (grouped) (PDF)                               | True      |\n+------------------------------------------------------------------+-----------+\n</code></pre> <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>-p/--pretty</code> Show table in a pretty format"},{"location":"commands/#executive_report-create","title":"executive_report create","text":"<p>Generate an executive report with a given template.</p> <pre><code>$ faraday-cli executive_report create -t \\'\"generic_default.html (generic) (PDF)\"\\'  --title title --summary summary --enterprise company  -d /tmp/test.pdf  --ignore-info\nReport created: /tmp/test.pdf\n</code></pre> <p>Optional Arguments:</p> Syntax Description <code>-w WORKSPACE_NAME</code> Workspace name <code>-t/--template TEMPLATE</code> Template <code>--title TITLE</code> Report title <code>--summary SUMMARY</code> Report summary <code>--recommendations RECOMMENDATIONS</code> Report recommendations <code>--conclusions CONCLUSIONS</code> Report conclusions <code>--scope SCOPE</code> Report scope <code>--objectives OBJECTIVES</code> Report objectives <code>--enterprise ENTERPRISE</code> Enterprise name <code>--confirmed</code> Confirmed vulnerabilities <code>--severity [SEVERITY [SEVERITY ...]]</code> Filter by severity informational/critical/high/medium/low/unclassified <code>--ignore-info</code> Ignore informational/unclassified vulnerabilities <code>-d/--destination DESTINATION</code> Report destination"},{"location":"commands/#help","title":"help","text":"<p>Using the help command you can get info of any command. <pre><code>$ faraday-cli help -v\n\nDocumented commands (use 'help -v' for verbose/'help &lt;topic&gt;' for details):\n\nCore\n--------------------------------------------------------------------------------\nauth                Authenticate with a faraday server\nexit                exit the application. Shorthand: Ctrl-D.\nstatus              Show Cli status\nversion             Faraday cli version\n\nObjects\n--------------------------------------------------------------------------------\nagent               agent actions\nexecutive_report    executive_report actions\nhost                host actions\nservice             service actions\ntool                tool actions\nvuln                vulnerabilities actions\nworkspace           workspace actions\n...\n</code></pre></p> <pre><code>$  faraday-cli help auth\nusage: auth [-h] [-f FARADAY_URL] [-i] [-u USER] [-p PASSWORD]\n\nAuthenticate with a faraday server\n\noptional arguments:\n  -h, --help            show this help message and exit\n  -f FARADAY_URL, --faraday-url FARADAY_URL\n                        Faraday server URL\n  -i, --ignore-ssl      Ignore SSL verification\n  -u USER, --user USER  Faraday user\n  -p PASSWORD, --password PASSWORD\n                        Faraday password\n</code></pre>"},{"location":"getting_started/","title":"Getting started","text":""},{"location":"getting_started/#installation-instructions","title":"Installation Instructions","text":""},{"location":"getting_started/#install","title":"Install","text":"pip <pre><code>$ pip install faraday-cli\n</code></pre> git <pre><code>$ git clone https://github.com/infobyte/faraday-cli.git\n$ cd faraday-cli\n$ pip install .\n</code></pre> <p>Python version</p> <p>Python 3.7 and up required.</p>"},{"location":"getting_started/#using-faraday-cli","title":"Using Faraday Cli","text":""},{"location":"getting_started/#authenticate-with-your-faraday-server","title":"Authenticate with your Faraday server","text":"<pre><code>$ faraday-cli\n\n    ______                     __               _________\n   / ____/___ __________ _____/ /___ ___  __   / ____/ (_)\n  / /_  / __ `/ ___/ __ `/ __  / __ `/ / / /  / /   / / /\n / __/ / /_/ / /  / /_/ / /_/ / /_/ / /_/ /  / /___/ / /\n/_/    \\__,_/_/   \\__,_/\\__,_/\\__,_/\\__, /   \\____/_/_/\n                                   /____/\n\nv:2.1.0\nServer: http://localhost:5985\nFaraday&gt; auth\n\nFaraday url [http://localhost:5985]:\n\nUser: faraday\n\nPassword:\nSaving config\n\u2714 Authenticated with faraday: http://localhost:5985\nFaraday&gt;\n</code></pre>"},{"location":"getting_started/#create-a-workspace-or-select-active-workspace","title":"Create a workspace or select active Workspace","text":"<pre><code>$ faraday-cli\n\n    ______                     __               _________\n   / ____/___ __________ _____/ /___ ___  __   / ____/ (_)\n  / /_  / __ `/ ___/ __ `/ __  / __ `/ / / /  / /   / / /\n / __/ / /_/ / /  / /_/ / /_/ / /_/ / /_/ /  / /___/ / /\n/_/    \\__,_/_/   \\__,_/\\__,_/\\__,_/\\__, /   \\____/_/_/\n                                   /____/\n\nv:2.1.0\nServer: http://localhost:5985\nFaraday&gt; workspace create test\n\u2714 Created workspace: test\n[ws:test]&gt;\n</code></pre> <pre><code>$ faraday-cli\n\n    ______                     __               _________\n   / ____/___ __________ _____/ /___ ___  __   / ____/ (_)\n  / /_  / __ `/ ___/ __ `/ __  / __ `/ / / /  / /   / / /\n / __/ / /_/ / /  / /_/ / /_/ / /_/ / /_/ /  / /___/ / /\n/_/    \\__,_/_/   \\__,_/\\__,_/\\__,_/\\__, /   \\____/_/_/\n                                   /____/\n\nv:2.1.0\nServer: http://localhost:5985\nFaraday&gt; workspace select test\n\u2714 Selected workspace: test\n[ws:test]&gt;\n</code></pre>"},{"location":"getting_started/#now-load-information-into-faraday","title":"Now load information into faraday","text":""},{"location":"getting_started/#process-reports-from-any-of-the-many-tools-we-support","title":"Process reports from any of the many tools we support","text":"<pre><code>$ faraday-cli\n\n    ______                     __               _________\n   / ____/___ __________ _____/ /___ ___  __   / ____/ (_)\n  / /_  / __ `/ ___/ __ `/ __  / __ `/ / / /  / /   / / /\n / __/ / /_/ / /  / /_/ / /_/ / /_/ / /_/ /  / /___/ / /\n/_/    \\__,_/_/   \\__,_/\\__,_/\\__,_/\\__, /   \\____/_/_/\n                                   /____/\n\nv:2.1.0\nServer: http://localhost:5985\n[ws:test]&gt; tool report /path/to/openvas.xml\n\ud83d\udcc4 Processing Openvas report\n\u2b06 Sending data to workspace: test\n\u2714 Done\n</code></pre>"},{"location":"getting_started/#or-run-the-tools-with-faraday-cli","title":"Or run the tools with faraday-cli","text":"<p>Faraday Cli can be used in two modes:</p> <ul> <li>shell mode: faraday-cli reacts as a shell to your commands</li> <li>command mode: faraday-cli reacts as a command with parameters</li> </ul>"},{"location":"getting_started/#shell-mode","title":"Shell Mode","text":"<p>In this mode Faraday-cli will react as a shell, so if you type an OS command it will process it as a shell.</p> <p>If auto_command_detection is enabled it will try to process any tool we support to send the info to faraday.</p> <p>Or you can use the command <code>tool run XXXX</code></p> <pre><code>$ faraday-cli\n\n    ______                     __               _________\n   / ____/___ __________ _____/ /___ ___  __   / ____/ (_)\n  / /_  / __ `/ ___/ __ `/ __  / __ `/ / / /  / /   / / /\n / __/ / /_/ / /  / /_/ / /_/ / /_/ / /_/ /  / /___/ / /\n/_/    \\__,_/_/   \\__,_/\\__,_/\\__,_/\\__, /   \\____/_/_/\n                                   /____/\n\nv:2.1.0\nServer: http://localhost:5985\n[ws:test]&gt; cd /tmp\n[ws:test]&gt; ls -l\ntotal 24\ndrwxr-xr-x@  4 user    wheel  128 Dec  9 09:38 com.google.Keystone\n-rw-------   1 root    wheel   36 Dec  9 08:31 fseventsd-uuid\ndrwxr-xr-x  21 root    wheel  672 Dec  9 08:38 msu-target-6bZPmxQ0\nsrwxrwxrwx   1 user    wheel    0 Dec  9 08:31 mysql.sock\n-rw-------   1 user    wheel    4 Dec  9 08:31 mysql.sock.lock\nsrwxrwxrwx   1 user    wheel    0 Dec  9 08:31 mysqlx.sock\n-rw-------   1 user    wheel    5 Dec  9 08:31 mysqlx.sock.lock\ndrwxr-xr-x   2 root    wheel   64 Dec  9 08:31 powerlog\ndrwx------   2 root    wheel   64 Dec  9 08:31 pritunl\n[ws:test]&gt; nmap localhost\n\ud83d\udcbb Processing Nmap command\nStarting Nmap 7.80 ( https://nmap.org ) at 2021-01-14 13:34 -03\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.00026s latency).\nOther addresses for localhost (not scanned): ::1\nNot shown: 961 closed ports, 29 filtered ports\nPORT      STATE SERVICE\n22/tcp    open  ssh\n80/tcp    open  http\n\nNmap done: 1 IP address (1 host up) scanned in 5.45 seconds\n\u2b06 Sending data to workspace: test\n\u2714 Done\n[ws:test]&gt; tool run \"nmap localhost\"\n\ud83d\udcbb Processing Nmap command\nStarting Nmap 7.80 ( https://nmap.org ) at 2021-01-14 13:34 -03\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.00026s latency).\nOther addresses for localhost (not scanned): ::1\nNot shown: 961 closed ports, 29 filtered ports\nPORT      STATE SERVICE\n22/tcp    open  ssh\n80/tcp    open  http\n\nNmap done: 1 IP address (1 host up) scanned in 5.45 seconds\n\u2b06 Sending data to workspace: test\n\u2714 Done\n</code></pre> <p>You can mix faraday-cli commands with other commands</p> <pre><code>[ws:test]&gt; vuln list | tail -3\n   3  Exposed metrics              LOW         opened    False        192.241.149.70 [Service - (443/tcp) https]   grafana.faradaysec.com\n   6  name                         CRITICAL    opened    True         123.230.222.247 [Host - ID:3]                sandbox.faradaysec.com\n   5  Python Django Admin Panel 2  CRITICAL    opened    False        133.230.222.247 [Service - (443/tcp) https]  sandbox.faradaysec.com\n</code></pre> <pre><code>[ws:test]&gt; vuln list -j| jq '.[0]| {target: .value.target, cve: .value.cve[0], name: .value.name}'\n{\n  \"target\": \"111.248.115.223\",\n  \"cve\": \"CVE-2007-0994\",\n  \"name\": \"Grafana panel detect\"\n}\n</code></pre>"},{"location":"getting_started/#command-mode","title":"Command Mode","text":"<p>Every faraday cli command can be used as an individual command from the command line.</p> <p>This is useful when integrating faraday cli to batch process, scripts or pipelines.</p> <pre><code>$ faraday-cli tool run \\\"nmap localhost\\\"\n\ud83d\udcbb Processing Nmap command\nStarting Nmap 7.80 ( https://nmap.org ) at 2021-01-14 13:34 -03\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.0010s latency).\nOther addresses for localhost (not scanned): ::1\nNot shown: 500 closed ports, 490 filtered ports\nPORT      STATE SERVICE\n22/tcp    open  ssh\n80/tcp    open  http\n\nNmap done: 1 IP address (1 host up) scanned in 2.55 seconds\n\u2b06 Sending data to workspace: test\n\u2714 Done\n</code></pre> <p>Info</p> <p>For more information check out our commands section.</p>"},{"location":"getting_started/#change-settings","title":"Change settings","text":"<p>You can change some settings from the cli itself.</p> <ul> <li>custom_plugins_path (Path where the cli will look for custom plugins)</li> <li>ignore_info_severity (If set to True the cli will ignore all INFORMATIONAL vulnerabilities) [DEFAULT: False]</li> <li>auto_command_detection (If set to True the cli will try process a tool when is run in shell mode) [DEFAULT: True]</li> </ul> <pre><code>$ faraday-cli\n\n    ______                     __               _________\n   / ____/___ __________ _____/ /___ ___  __   / ____/ (_)\n  / /_  / __ `/ ___/ __ `/ __  / __ `/ / / /  / /   / / /\n / __/ / /_/ / /  / /_/ / /_/ / /_/ / /_/ /  / /___/ / /\n/_/    \\__,_/_/   \\__,_/\\__,_/\\__,_/\\__, /   \\____/_/_/\n                                   /____/\n\nServer: http://localhost:5985\n[ws:test]&gt; set ignore_info_severity true\nignore_info_severity - was: False\nnow: True\n[ws:test]&gt;\n</code></pre>"},{"location":"settings/","title":"Global Configurations","text":"<p>You can list or change some settings from the cli itself.</p> <pre><code>$ faraday-cli set\n+------------------------+----------+----------------------------------------------------------------------------------+\n|          Name          |  Value   |                                   Description                                    |\n+------------------------+----------+----------------------------------------------------------------------------------+\n| allow_style            | Terminal | Allow ANSI text style sequences in output (valid values:Always, Never, Terminal) |\n| always_show_hint       | False    | Display tab completion hint even when completion suggestions print               |\n| auto_command_detection | True     | Enable/disable automatic command detection                                       |\n| custom_plugins_path    | None     | Path of custom plugins folder                                                    |\n| echo                   | False    | Echo command issued into output                                                  |\n| editor                 | vim      | Program used by 'edit'                                                           |\n| feedback_to_output     | False    | Include nonessentials in '|', '&gt;' results                                        |\n| hostname_resolution    | True     | Enable/disable hostname resolution                                               |\n| ignore_info_severity   | False    | Ignore Informational vulnerabilities from reports and commands                   |\n| max_completion_items   | 50       | Maximum number of CompletionItems to display during tab completion               |\n| quiet                  | False    | Don't print nonessential feedback                                                |\n| timing                 | False    | Report execution times                                                           |\n+------------------------+----------+----------------------------------------------------------------------------------+\n\n$ faraday-cli set hostname_resolution False\nhostname_resolution - was: True\nnow: False\n</code></pre>"}]}